# 撤回已关闭网页 Chrome 扩展

一个简单实用的 Chrome 扩展，帮助您快速恢复意外关闭的标签页。

## ✨ 功能特性

- 🔄 **自动监听**：自动监听标签页关闭事件
- 💾 **智能存储**：保存最近 50 个关闭的标签页信息
- ⚡ **一键恢复**：点击即可快速恢复关闭的标签页
- 🔍 **实时搜索**：支持按标题和URL搜索，实时过滤结果
- 📌 **置顶功能**：重要标签页可置顶，固定显示在最上方
- 🖱️ **右键菜单**：支持置顶、取消置顶、删除等操作
- 🎨 **分离布局**：置顶区域固定显示，普通列表独立滚动
- ⌨️ **快捷操作**：支持ESC键快速清空搜索
- 🗑️ **历史管理**：支持清空所有历史记录
- 🔒 **隐私保护**：不保存隐私模式和敏感页面

## 🚀 安装使用

### 开发环境安装

1. **克隆项目**
   ```bash
   git clone <repository-url>
   cd withdraw
   ```

2. **安装依赖**
   ```bash
   npm install
   ```

3. **编译项目**
   ```bash
   npm run build
   ```

4. **加载到 Chrome**
   - 打开 Chrome 浏览器
   - 访问 `chrome://extensions/`
   - 开启"开发者模式"
   - 点击"加载已解压的扩展程序"
   - 选择项目根目录

### 使用方法

1. **安装扩展后**，它会自动开始监听标签页关闭事件
2. **关闭标签页**后，信息会被自动保存
3. **点击扩展图标**，查看最近关闭的标签页列表
4. **使用搜索框**，快速找到特定的标签页（支持标题和URL搜索）
5. **右键点击标签页**，可以进行置顶、取消置顶或删除操作
6. **置顶的标签页**会显示在固定区域，滚动时始终可见
7. **点击任意条目**，即可恢复对应的标签页
8. **按ESC键**，快速清空搜索内容
9. **点击"清空历史"**，可以清除所有记录

## 🛠️ 技术架构

### 技术栈
- **Manifest V3**：Chrome 扩展最新标准
- **TypeScript**：提供类型安全和更好的开发体验
- **原生 HTML/CSS**：轻量级，无额外依赖

### 核心组件
- **background.ts**：服务工作者，处理标签页事件监听和数据存储
- **popup.ts**：弹出界面逻辑，处理用户交互、搜索、右键菜单、置顶功能和数据展示
- **popup.html**：弹出界面结构，包含搜索框、置顶区域、标签页列表和右键菜单
- **popup.css**：界面样式，包含分离式布局、右键菜单和响应式设计
- **types.ts**：TypeScript 类型定义

### 权限说明
- `tabs`：监听标签页事件，创建新标签页
- `storage`：本地存储已关闭的标签页信息

## 📁 项目结构

```
withdraw/
├── src/                    # 源代码目录
│   ├── background.ts       # 服务工作者
│   ├── popup.ts           # 弹出界面逻辑
│   ├── popup.html         # 弹出界面结构
│   ├── popup.css          # 弹出界面样式
│   └── types.ts           # 类型定义
├── dist/                  # 编译输出目录
├── icons/                 # 扩展图标
├── manifest.json          # 扩展配置文件
├── package.json           # 项目配置
├── tsconfig.json          # TypeScript 配置
└── README.md             # 项目说明
```

## 🔧 开发命令

```bash
# 安装依赖
npm install

# 编译项目
npm run build

# 监听模式编译
npm run watch

# 清理输出目录
npm run clean
```

## 🎯 功能限制

- 只能监听扩展安装后关闭的标签页
- 不保存隐私模式的标签页
- 不保存 chrome:// 等特殊页面
- 最多保存 50 个历史记录

## 🔮 未来计划

- [x] ~~添加搜索和过滤功能~~ ✅ 已完成
- [x] ~~右键菜单功能~~ ✅ 已完成
- [x] ~~置顶标签页功能~~ ✅ 已完成
- [ ] 支持批量恢复
- [ ] 添加设置页面
- [ ] 支持数据导出/导入
- [ ] 集成浏览历史 API
- [ ] 添加侧边栏支持
- [ ] 标签页分组功能
- [ ] 主题切换功能

## 📄 许可证

MIT License

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

---

**注意**：使用前请确保已添加扩展图标文件（icon16.png, icon48.png, icon128.png）到 icons 目录。
